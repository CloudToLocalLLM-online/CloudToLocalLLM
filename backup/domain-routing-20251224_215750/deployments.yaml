apiVersion: v1
items:
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      argocd.argoproj.io/tracking-id: monitoring:apps/Deployment:cloudtolocalllm/alertmanager
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"argocd.argoproj.io/tracking-id":"monitoring:apps/Deployment:cloudtolocalllm/alertmanager"},"labels":{"app":"alertmanager"},"name":"alertmanager","namespace":"cloudtolocalllm"},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"alertmanager"}},"template":{"metadata":{"labels":{"app":"alertmanager"}},"spec":{"containers":[{"args":["--config.file=/etc/alertmanager/alertmanager.yml","--storage.path=/alertmanager","--web.external-url=http://alertmanager.cloudtolocalllm.online"],"env":[{"name":"SLACK_WEBHOOK_URL","valueFrom":{"secretKeyRef":{"key":"slack-webhook-url","name":"cloudtolocalllm-secrets","optional":true}}},{"name":"SMTP_HOST","valueFrom":{"secretKeyRef":{"key":"smtp-host","name":"cloudtolocalllm-secrets","optional":true}}},{"name":"SMTP_PORT","valueFrom":{"secretKeyRef":{"key":"smtp-port","name":"cloudtolocalllm-secrets","optional":true}}},{"name":"SMTP_USERNAME","valueFrom":{"secretKeyRef":{"key":"smtp-username","name":"cloudtolocalllm-secrets","optional":true}}},{"name":"SMTP_PASSWORD","valueFrom":{"secretKeyRef":{"key":"smtp-password","name":"cloudtolocalllm-secrets","optional":true}}}],"image":"prom/alertmanager:latest","imagePullPolicy":"IfNotPresent","livenessProbe":{"httpGet":{"path":"/-/healthy","port":9093},"initialDelaySeconds":10,"periodSeconds":10},"name":"alertmanager","ports":[{"containerPort":9093,"name":"http"}],"readinessProbe":{"httpGet":{"path":"/-/ready","port":9093},"initialDelaySeconds":5,"periodSeconds":5},"resources":{"limits":{"cpu":"200m","memory":"256Mi"},"requests":{"cpu":"50m","memory":"128Mi"}},"volumeMounts":[{"mountPath":"/etc/alertmanager","name":"config"},{"mountPath":"/alertmanager","name":"storage"}]}],"securityContext":{"fsGroup":65534,"runAsNonRoot":true,"runAsUser":65534},"volumes":[{"configMap":{"name":"alertmanager-config"},"name":"config"},{"emptyDir":{},"name":"storage"}]}}}}
    creationTimestamp: "2025-12-24T23:56:26Z"
    generation: 1
    labels:
      app: alertmanager
    name: alertmanager
    namespace: cloudtolocalllm
    resourceVersion: "8232826"
    uid: 4b8af713-7544-4b4c-bf10-4ec26236c379
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: alertmanager
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: alertmanager
      spec:
        containers:
        - args:
          - --config.file=/etc/alertmanager/alertmanager.yml
          - --storage.path=/alertmanager
          - --web.external-url=http://alertmanager.cloudtolocalllm.online
          env:
          - name: SLACK_WEBHOOK_URL
            valueFrom:
              secretKeyRef:
                key: slack-webhook-url
                name: cloudtolocalllm-secrets
                optional: true
          - name: SMTP_HOST
            valueFrom:
              secretKeyRef:
                key: smtp-host
                name: cloudtolocalllm-secrets
                optional: true
          - name: SMTP_PORT
            valueFrom:
              secretKeyRef:
                key: smtp-port
                name: cloudtolocalllm-secrets
                optional: true
          - name: SMTP_USERNAME
            valueFrom:
              secretKeyRef:
                key: smtp-username
                name: cloudtolocalllm-secrets
                optional: true
          - name: SMTP_PASSWORD
            valueFrom:
              secretKeyRef:
                key: smtp-password
                name: cloudtolocalllm-secrets
                optional: true
          image: prom/alertmanager:latest
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /-/healthy
              port: 9093
              scheme: HTTP
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          name: alertmanager
          ports:
          - containerPort: 9093
            name: http
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /-/ready
              port: 9093
              scheme: HTTP
            initialDelaySeconds: 5
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 200m
              memory: 256Mi
            requests:
              cpu: 50m
              memory: 128Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /etc/alertmanager
            name: config
          - mountPath: /alertmanager
            name: storage
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext:
          fsGroup: 65534
          runAsNonRoot: true
          runAsUser: 65534
        terminationGracePeriodSeconds: 30
        volumes:
        - configMap:
            defaultMode: 420
            name: alertmanager-config
          name: config
        - emptyDir: {}
          name: storage
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2025-12-24T23:56:34Z"
      lastUpdateTime: "2025-12-24T23:56:34Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    - lastTransitionTime: "2025-12-24T23:56:26Z"
      lastUpdateTime: "2025-12-24T23:56:34Z"
      message: ReplicaSet "alertmanager-7ddfd5458b" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      argocd.argoproj.io/compare-options: IgnoreExtraneous
      argocd.argoproj.io/refresh: "true"
      argocd.argoproj.io/sync-options: Replace=true
      argocd.argoproj.io/sync-wave: "5"
      argocd.argoproj.io/tracking-id: api-backend:apps/Deployment:cloudtolocalllm/api-backend
      deployment.kubernetes.io/revision: "1"
    creationTimestamp: "2025-12-24T23:56:42Z"
    generation: 1
    labels:
      app: api-backend
      app.kubernetes.io/component: backend
      app.kubernetes.io/instance: api-backend
      app.kubernetes.io/managed-by: argocd
      app.kubernetes.io/name: api-backend
      app.kubernetes.io/part-of: cloudtolocalllm
      app.kubernetes.io/version: 7.10.9
      cloudtolocalllm.com/app-environment: production
      cloudtolocalllm.com/app-tier: backend
      cloudtolocalllm.com/app-type: api
      component: api
      environment: production
      tier: backend
    name: api-backend
    namespace: cloudtolocalllm
    resourceVersion: "8237164"
    uid: b305405d-62ff-4d8b-bb54-92fc85d9a88a
  spec:
    progressDeadlineSeconds: 600
    replicas: 2
    revisionHistoryLimit: 5
    selector:
      matchLabels:
        app: api-backend
        app.kubernetes.io/instance: api-backend
        app.kubernetes.io/name: api-backend
    strategy:
      rollingUpdate:
        maxSurge: 1
        maxUnavailable: 0
      type: RollingUpdate
    template:
      metadata:
        annotations:
          checksum/config: '{{ .Values.configChecksum }}'
          checksum/secrets: '{{ .Values.secretsChecksum }}'
          prometheus.io/path: /metrics
          prometheus.io/port: "8080"
          prometheus.io/scrape: "true"
        creationTimestamp: null
        labels:
          app: api-backend
          app.kubernetes.io/component: backend
          app.kubernetes.io/instance: api-backend
          app.kubernetes.io/managed-by: argocd
          app.kubernetes.io/name: api-backend
          app.kubernetes.io/part-of: cloudtolocalllm
          app.kubernetes.io/version: 7.10.9
          cloudtolocalllm.com/app-environment: production
          cloudtolocalllm.com/app-tier: backend
          cloudtolocalllm.com/app-type: api
          component: api
          environment: production
          tier: backend
      spec:
        affinity:
          podAntiAffinity:
            preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchExpressions:
                  - key: app
                    operator: In
                    values:
                    - api-backend
                topologyKey: kubernetes.io/hostname
              weight: 100
        containers:
        - env:
          - name: NODE_ENV
            valueFrom:
              configMapKeyRef:
                key: NODE_ENV
                name: cloudtolocalllm-config
          - name: LOG_LEVEL
            valueFrom:
              configMapKeyRef:
                key: LOG_LEVEL
                name: cloudtolocalllm-config
          - name: CLIENT_LOG_DIR
            valueFrom:
              configMapKeyRef:
                key: CLIENT_LOG_DIR
                name: cloudtolocalllm-config
          - name: PORT
            valueFrom:
              configMapKeyRef:
                key: PORT
                name: cloudtolocalllm-config
          - name: DOMAIN
            valueFrom:
              configMapKeyRef:
                key: DOMAIN
                name: cloudtolocalllm-config
          - name: DB_TYPE
            valueFrom:
              configMapKeyRef:
                key: DB_TYPE
                name: cloudtolocalllm-config
          - name: DB_HOST
            valueFrom:
              configMapKeyRef:
                key: DB_HOST
                name: cloudtolocalllm-config
          - name: DB_PORT
            valueFrom:
              configMapKeyRef:
                key: DB_PORT
                name: cloudtolocalllm-config
          - name: DB_NAME
            valueFrom:
              configMapKeyRef:
                key: DB_NAME
                name: cloudtolocalllm-config
          - name: DB_USER
            valueFrom:
              secretKeyRef:
                key: postgres-user
                name: cloudtolocalllm-secrets
          - name: AUTH_DB_HOST
            valueFrom:
              configMapKeyRef:
                key: AUTH_DB_HOST
                name: cloudtolocalllm-config
          - name: AUTH_DB_PORT
            valueFrom:
              configMapKeyRef:
                key: AUTH_DB_PORT
                name: cloudtolocalllm-config
          - name: AUTH_DB_NAME
            valueFrom:
              configMapKeyRef:
                key: AUTH_DB_NAME
                name: cloudtolocalllm-config
          - name: AUTH_DB_USER
            valueFrom:
              configMapKeyRef:
                key: AUTH_DB_USER
                name: cloudtolocalllm-config
          - name: AUTH_DB_PASSWORD
            valueFrom:
              secretKeyRef:
                key: postgres-auth-password
                name: cloudtolocalllm-secrets
          - name: DB_PASSWORD
            valueFrom:
              secretKeyRef:
                key: postgres-password
                name: cloudtolocalllm-secrets
          - name: JWT_SECRET
            valueFrom:
              secretKeyRef:
                key: jwt-secret
                name: cloudtolocalllm-secrets
          - name: SUPABASE_JWT_SECRET
            valueFrom:
              secretKeyRef:
                key: supabase-jwt-secret
                name: cloudtolocalllm-secrets
          - name: SUPABASE_URL
            valueFrom:
              secretKeyRef:
                key: supabase-url
                name: cloudtolocalllm-secrets
          - name: AUTH0_ISSUER_URL
            valueFrom:
              secretKeyRef:
                key: auth0-issuer-url
                name: cloudtolocalllm-secrets
          - name: AUTH0_CLIENT_ID
            valueFrom:
              secretKeyRef:
                key: auth0-client-id
                name: cloudtolocalllm-secrets
          - name: AUTH0_CLIENT_SECRET
            valueFrom:
              secretKeyRef:
                key: auth0-client-secret
                name: cloudtolocalllm-secrets
          - name: AUTH0_AUDIENCE
            valueFrom:
              secretKeyRef:
                key: auth0-audience
                name: cloudtolocalllm-secrets
          - name: ADMIN_EMAIL
            valueFrom:
              configMapKeyRef:
                key: ADMIN_EMAIL
                name: cloudtolocalllm-config
          - name: DB_POOL_MAX
            valueFrom:
              configMapKeyRef:
                key: DB_POOL_MAX
                name: cloudtolocalllm-config
          - name: DB_POOL_IDLE_TIMEOUT
            valueFrom:
              configMapKeyRef:
                key: DB_POOL_IDLE_TIMEOUT
                name: cloudtolocalllm-config
          - name: DB_POOL_CONNECTION_TIMEOUT
            valueFrom:
              configMapKeyRef:
                key: DB_POOL_CONNECTION_TIMEOUT
                name: cloudtolocalllm-config
          - name: STRIPE_SECRET_KEY
            valueFrom:
              secretKeyRef:
                key: stripe-test-secret-key
                name: cloudtolocalllm-secrets
          - name: STRIPE_PUBLISHABLE_KEY
            valueFrom:
              secretKeyRef:
                key: stripe-test-publishable-key
                name: cloudtolocalllm-secrets
          - name: STRIPE_WEBHOOK_SECRET
            valueFrom:
              secretKeyRef:
                key: stripe-test-webhook-secret
                name: cloudtolocalllm-secrets
          - name: SENTRY_DSN
            valueFrom:
              secretKeyRef:
                key: sentry-dsn
                name: cloudtolocalllm-secrets
                optional: true
          - name: APP_MODE
            value: local
          - name: ENABLE_BILLING
            value: "false"
          - name: ENABLE_MULTI_TENANCY
            value: "false"
          - name: ADMIN_CENTER_ENABLED
            value: "true"
          - name: ENABLE_ADMIN_PAYMENTS
            value: "false"
          image: imrightguycloudtolocalllm.azurecr.io/api-backend:7.10.9-202512190353-api-backend
          imagePullPolicy: Always
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /health
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 60
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
          name: api-backend
          ports:
          - containerPort: 8080
            name: http
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /health
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 10
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 3
          resources:
            limits:
              cpu: 500m
              memory: 1Gi
            requests:
              cpu: 250m
              memory: 512Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: false
            runAsNonRoot: true
            runAsUser: 1001
          startupProbe:
            failureThreshold: 30
            httpGet:
              path: /health
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 5
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 3
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /tmp
            name: tmp
          - mountPath: /var/log/api-backend
            name: logs
        dnsPolicy: ClusterFirst
        imagePullSecrets:
        - name: acr-credentials
        - name: regcred
        initContainers:
        - command:
          - sh
          - -c
          - |
            until pg_isready -h postgres.cloudtolocalllm.svc.cluster.local -p 5432 -U postgres; do
              echo "Waiting for postgres..."
              sleep 2
            done
          image: postgres:16-alpine
          imagePullPolicy: IfNotPresent
          name: wait-for-postgres
          resources:
            limits:
              cpu: 100m
              memory: 128Mi
            requests:
              cpu: 50m
              memory: 64Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
            runAsNonRoot: true
            runAsUser: 1001
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        - command:
          - npm
          - run
          - db:migrate
          env:
          - name: NODE_ENV
            valueFrom:
              configMapKeyRef:
                key: NODE_ENV
                name: cloudtolocalllm-config
          - name: LOG_LEVEL
            valueFrom:
              configMapKeyRef:
                key: LOG_LEVEL
                name: cloudtolocalllm-config
          - name: CLIENT_LOG_DIR
            valueFrom:
              configMapKeyRef:
                key: CLIENT_LOG_DIR
                name: cloudtolocalllm-config
          - name: PORT
            valueFrom:
              configMapKeyRef:
                key: PORT
                name: cloudtolocalllm-config
          - name: DOMAIN
            valueFrom:
              configMapKeyRef:
                key: DOMAIN
                name: cloudtolocalllm-config
          - name: DB_TYPE
            valueFrom:
              configMapKeyRef:
                key: DB_TYPE
                name: cloudtolocalllm-config
          - name: DB_HOST
            valueFrom:
              configMapKeyRef:
                key: DB_HOST
                name: cloudtolocalllm-config
          - name: DB_PORT
            valueFrom:
              configMapKeyRef:
                key: DB_PORT
                name: cloudtolocalllm-config
          - name: DB_NAME
            valueFrom:
              configMapKeyRef:
                key: DB_NAME
                name: cloudtolocalllm-config
          - name: DB_USER
            valueFrom:
              secretKeyRef:
                key: postgres-user
                name: cloudtolocalllm-secrets
          - name: AUTH_DB_HOST
            valueFrom:
              configMapKeyRef:
                key: AUTH_DB_HOST
                name: cloudtolocalllm-config
          - name: AUTH_DB_PORT
            valueFrom:
              configMapKeyRef:
                key: AUTH_DB_PORT
                name: cloudtolocalllm-config
          - name: AUTH_DB_NAME
            valueFrom:
              configMapKeyRef:
                key: AUTH_DB_NAME
                name: cloudtolocalllm-config
          - name: AUTH_DB_USER
            valueFrom:
              configMapKeyRef:
                key: AUTH_DB_USER
                name: cloudtolocalllm-config
          - name: AUTH_DB_PASSWORD
            valueFrom:
              secretKeyRef:
                key: postgres-auth-password
                name: cloudtolocalllm-secrets
          - name: DB_PASSWORD
            valueFrom:
              secretKeyRef:
                key: postgres-password
                name: cloudtolocalllm-secrets
          - name: JWT_SECRET
            valueFrom:
              secretKeyRef:
                key: jwt-secret
                name: cloudtolocalllm-secrets
          - name: SUPABASE_JWT_SECRET
            valueFrom:
              secretKeyRef:
                key: supabase-jwt-secret
                name: cloudtolocalllm-secrets
          - name: SUPABASE_URL
            valueFrom:
              secretKeyRef:
                key: supabase-url
                name: cloudtolocalllm-secrets
          - name: AUTH0_ISSUER_URL
            valueFrom:
              secretKeyRef:
                key: auth0-issuer-url
                name: cloudtolocalllm-secrets
          - name: AUTH0_CLIENT_ID
            valueFrom:
              secretKeyRef:
                key: auth0-client-id
                name: cloudtolocalllm-secrets
          - name: AUTH0_CLIENT_SECRET
            valueFrom:
              secretKeyRef:
                key: auth0-client-secret
                name: cloudtolocalllm-secrets
          - name: AUTH0_AUDIENCE
            valueFrom:
              secretKeyRef:
                key: auth0-audience
                name: cloudtolocalllm-secrets
          - name: ADMIN_EMAIL
            valueFrom:
              configMapKeyRef:
                key: ADMIN_EMAIL
                name: cloudtolocalllm-config
          - name: DB_POOL_MAX
            valueFrom:
              configMapKeyRef:
                key: DB_POOL_MAX
                name: cloudtolocalllm-config
          - name: DB_POOL_IDLE_TIMEOUT
            valueFrom:
              configMapKeyRef:
                key: DB_POOL_IDLE_TIMEOUT
                name: cloudtolocalllm-config
          - name: DB_POOL_CONNECTION_TIMEOUT
            valueFrom:
              configMapKeyRef:
                key: DB_POOL_CONNECTION_TIMEOUT
                name: cloudtolocalllm-config
          - name: STRIPE_SECRET_KEY
            valueFrom:
              secretKeyRef:
                key: stripe-test-secret-key
                name: cloudtolocalllm-secrets
          - name: STRIPE_PUBLISHABLE_KEY
            valueFrom:
              secretKeyRef:
                key: stripe-test-publishable-key
                name: cloudtolocalllm-secrets
          - name: STRIPE_WEBHOOK_SECRET
            valueFrom:
              secretKeyRef:
                key: stripe-test-webhook-secret
                name: cloudtolocalllm-secrets
          - name: SENTRY_DSN
            valueFrom:
              secretKeyRef:
                key: sentry-dsn
                name: cloudtolocalllm-secrets
                optional: true
          image: imrightguycloudtolocalllm.azurecr.io/api-backend:7.10.9-202512190353-api-backend
          imagePullPolicy: Always
          name: db-migrate
          resources:
            limits:
              cpu: 200m
              memory: 256Mi
            requests:
              cpu: 100m
              memory: 128Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: false
            runAsNonRoot: true
            runAsUser: 1001
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        nodeSelector:
          kubernetes.io/os: linux
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext:
          fsGroup: 1001
          runAsNonRoot: true
          runAsUser: 1001
          seccompProfile:
            type: RuntimeDefault
        serviceAccount: api-backend-sa
        serviceAccountName: api-backend-sa
        terminationGracePeriodSeconds: 30
        tolerations:
        - effect: NoSchedule
          key: node.kubernetes.io/memory-pressure
          operator: Exists
        volumes:
        - emptyDir: {}
          name: tmp
        - emptyDir: {}
          name: logs
  status:
    conditions:
    - lastTransitionTime: "2025-12-24T23:56:42Z"
      lastUpdateTime: "2025-12-24T23:56:42Z"
      message: Deployment does not have minimum availability.
      reason: MinimumReplicasUnavailable
      status: "False"
      type: Available
    - lastTransitionTime: "2025-12-25T00:06:43Z"
      lastUpdateTime: "2025-12-25T00:06:43Z"
      message: ReplicaSet "api-backend-cbdd8bcf5" has timed out progressing.
      reason: ProgressDeadlineExceeded
      status: "False"
      type: Progressing
    observedGeneration: 1
    replicas: 2
    unavailableReplicas: 2
    updatedReplicas: 2
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      argocd.argoproj.io/tracking-id: utilities:apps/Deployment:cloudtolocalllm/blackbox-exporter
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"argocd.argoproj.io/tracking-id":"utilities:apps/Deployment:cloudtolocalllm/blackbox-exporter"},"name":"blackbox-exporter","namespace":"cloudtolocalllm"},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"blackbox-exporter"}},"template":{"metadata":{"labels":{"app":"blackbox-exporter"}},"spec":{"containers":[{"image":"prom/blackbox-exporter:latest","name":"blackbox-exporter","ports":[{"containerPort":9115}],"resources":{"limits":{"cpu":"200m","memory":"128Mi"},"requests":{"cpu":"50m","memory":"64Mi"}}}]}}}}
    creationTimestamp: "2025-12-24T23:56:26Z"
    generation: 1
    name: blackbox-exporter
    namespace: cloudtolocalllm
    resourceVersion: "8232740"
    uid: 76377fcb-04e0-4b70-b35e-554247a098ed
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: blackbox-exporter
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: blackbox-exporter
      spec:
        containers:
        - image: prom/blackbox-exporter:latest
          imagePullPolicy: Always
          name: blackbox-exporter
          ports:
          - containerPort: 9115
            protocol: TCP
          resources:
            limits:
              cpu: 200m
              memory: 128Mi
            requests:
              cpu: 50m
              memory: 64Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2025-12-24T23:56:28Z"
      lastUpdateTime: "2025-12-24T23:56:28Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    - lastTransitionTime: "2025-12-24T23:56:26Z"
      lastUpdateTime: "2025-12-24T23:56:28Z"
      message: ReplicaSet "blackbox-exporter-55fc4c7cd5" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      argocd.argoproj.io/tracking-id: ingress-cloudflared:apps/Deployment:cloudtolocalllm/cloudflared
      deployment.kubernetes.io/revision: "2"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"argocd.argoproj.io/tracking-id":"ingress-cloudflared:apps/Deployment:cloudtolocalllm/cloudflared"},"labels":{"app":"cloudflared"},"name":"cloudflared","namespace":"cloudtolocalllm"},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"cloudflared"}},"template":{"metadata":{"labels":{"app":"cloudflared"}},"spec":{"containers":[{"args":["tunnel","--config","/etc/cloudflared/config/config.yaml","run","--token","$(TUNNEL_TOKEN)"],"env":[{"name":"TUNNEL_TOKEN","valueFrom":{"secretKeyRef":{"key":"token","name":"tunnel-credentials"}}}],"image":"cloudflare/cloudflared:latest","livenessProbe":{"failureThreshold":3,"httpGet":{"path":"/ready","port":2000},"initialDelaySeconds":30,"periodSeconds":10},"name":"cloudflared","volumeMounts":[{"mountPath":"/etc/cloudflared/config","name":"config","readOnly":true}]}],"serviceAccountName":"cloudflared","volumes":[{"configMap":{"items":[{"key":"config.yaml","path":"config.yaml"}],"name":"cloudflared-config"},"name":"config"}]}}}}
    creationTimestamp: "2025-12-24T23:56:23Z"
    generation: 2
    labels:
      app: cloudflared
    name: cloudflared
    namespace: cloudtolocalllm
    resourceVersion: "8285102"
    uid: 5fc67114-62a8-4381-98b7-71b97852d418
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: cloudflared
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          kubectl.kubernetes.io/restartedAt: "2025-12-24T21:57:06-05:00"
        creationTimestamp: null
        labels:
          app: cloudflared
      spec:
        containers:
        - args:
          - tunnel
          - --config
          - /etc/cloudflared/config/config.yaml
          - run
          - --token
          - $(TUNNEL_TOKEN)
          env:
          - name: TUNNEL_TOKEN
            valueFrom:
              secretKeyRef:
                key: token
                name: tunnel-credentials
          image: cloudflare/cloudflared:latest
          imagePullPolicy: Always
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /ready
              port: 2000
              scheme: HTTP
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          name: cloudflared
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /etc/cloudflared/config
            name: config
            readOnly: true
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: cloudflared
        serviceAccountName: cloudflared
        terminationGracePeriodSeconds: 30
        volumes:
        - configMap:
            defaultMode: 420
            items:
            - key: config.yaml
              path: config.yaml
            name: cloudflared-config
          name: config
  status:
    conditions:
    - lastTransitionTime: "2025-12-24T23:56:23Z"
      lastUpdateTime: "2025-12-24T23:56:23Z"
      message: Deployment does not have minimum availability.
      reason: MinimumReplicasUnavailable
      status: "False"
      type: Available
    - lastTransitionTime: "2025-12-25T02:57:06Z"
      lastUpdateTime: "2025-12-25T02:57:06Z"
      message: ReplicaSet "cloudflared-c57448bbf" is progressing.
      reason: ReplicaSetUpdated
      status: "True"
      type: Progressing
    observedGeneration: 2
    replicas: 2
    unavailableReplicas: 2
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      argocd.argoproj.io/tracking-id: utilities:apps/Deployment:cloudtolocalllm/coturn
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"argocd.argoproj.io/tracking-id":"utilities:apps/Deployment:cloudtolocalllm/coturn"},"name":"coturn","namespace":"cloudtolocalllm"},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"coturn"}},"template":{"metadata":{"labels":{"app":"coturn"}},"spec":{"containers":[{"env":[{"name":"EXTERNAL_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}}],"envFrom":[{"secretRef":{"name":"coturn-secret"}}],"image":"coturn/coturn:latest","name":"coturn","ports":[{"containerPort":3478,"name":"turn-udp","protocol":"UDP"},{"containerPort":3478,"name":"turn-tcp","protocol":"TCP"},{"containerPort":5349,"name":"turn-tls","protocol":"TCP"}],"resources":{"limits":{"cpu":"500m","memory":"128Mi"},"requests":{"cpu":"100m","memory":"64Mi"}},"volumeMounts":[{"mountPath":"/etc/coturn","name":"config"}]}],"volumes":[{"configMap":{"name":"coturn-config"},"name":"config"}]}}}}
    creationTimestamp: "2025-12-24T23:56:26Z"
    generation: 1
    name: coturn
    namespace: cloudtolocalllm
    resourceVersion: "8232722"
    uid: 59caf02e-2df5-4f82-bbe2-2d3e3e829746
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: coturn
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: coturn
      spec:
        containers:
        - env:
          - name: EXTERNAL_IP
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: status.hostIP
          envFrom:
          - secretRef:
              name: coturn-secret
          image: coturn/coturn:latest
          imagePullPolicy: Always
          name: coturn
          ports:
          - containerPort: 3478
            name: turn-udp
            protocol: UDP
          - containerPort: 3478
            name: turn-tcp
            protocol: TCP
          - containerPort: 5349
            name: turn-tls
            protocol: TCP
          resources:
            limits:
              cpu: 500m
              memory: 128Mi
            requests:
              cpu: 100m
              memory: 64Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /etc/coturn
            name: config
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
        volumes:
        - configMap:
            defaultMode: 420
            name: coturn-config
          name: config
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2025-12-24T23:56:28Z"
      lastUpdateTime: "2025-12-24T23:56:28Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    - lastTransitionTime: "2025-12-24T23:56:26Z"
      lastUpdateTime: "2025-12-24T23:56:28Z"
      message: ReplicaSet "coturn-97df858d" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      argocd.argoproj.io/tracking-id: monitoring:apps/Deployment:cloudtolocalllm/grafana
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"argocd.argoproj.io/tracking-id":"monitoring:apps/Deployment:cloudtolocalllm/grafana"},"name":"grafana","namespace":"cloudtolocalllm"},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"grafana"}},"template":{"metadata":{"labels":{"app":"grafana"}},"spec":{"containers":[{"env":[{"name":"GF_SECURITY_ADMIN_PASSWORD","valueFrom":{"secretKeyRef":{"key":"admin-password","name":"cloudtolocalllm-secrets"}}}],"image":"grafana/grafana:latest","livenessProbe":{"httpGet":{"path":"/api/health","port":3000},"initialDelaySeconds":30,"periodSeconds":10},"name":"grafana","ports":[{"containerPort":3000,"name":"http"}],"readinessProbe":{"httpGet":{"path":"/api/health","port":3000},"initialDelaySeconds":10,"periodSeconds":5},"resources":{"limits":{"cpu":"500m","memory":"512Mi"},"requests":{"cpu":"100m","memory":"256Mi"}},"volumeMounts":[{"mountPath":"/var/lib/grafana","name":"storage"}]}],"securityContext":{"fsGroup":472,"runAsNonRoot":true,"runAsUser":472},"volumes":[{"emptyDir":{},"name":"storage"}]}}}}
    creationTimestamp: "2025-12-24T23:56:26Z"
    generation: 1
    name: grafana
    namespace: cloudtolocalllm
    resourceVersion: "8237073"
    uid: 29a65b90-6278-46f0-8ede-8f46f6ecbba8
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: grafana
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: grafana
      spec:
        containers:
        - env:
          - name: GF_SECURITY_ADMIN_PASSWORD
            valueFrom:
              secretKeyRef:
                key: admin-password
                name: cloudtolocalllm-secrets
          image: grafana/grafana:latest
          imagePullPolicy: Always
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /api/health
              port: 3000
              scheme: HTTP
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          name: grafana
          ports:
          - containerPort: 3000
            name: http
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /api/health
              port: 3000
              scheme: HTTP
            initialDelaySeconds: 10
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 500m
              memory: 512Mi
            requests:
              cpu: 100m
              memory: 256Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /var/lib/grafana
            name: storage
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext:
          fsGroup: 472
          runAsNonRoot: true
          runAsUser: 472
        terminationGracePeriodSeconds: 30
        volumes:
        - emptyDir: {}
          name: storage
  status:
    conditions:
    - lastTransitionTime: "2025-12-24T23:56:26Z"
      lastUpdateTime: "2025-12-24T23:56:26Z"
      message: Deployment does not have minimum availability.
      reason: MinimumReplicasUnavailable
      status: "False"
      type: Available
    - lastTransitionTime: "2025-12-25T00:06:27Z"
      lastUpdateTime: "2025-12-25T00:06:27Z"
      message: ReplicaSet "grafana-5b8757fdf5" has timed out progressing.
      reason: ProgressDeadlineExceeded
      status: "False"
      type: Progressing
    observedGeneration: 1
    replicas: 1
    unavailableReplicas: 1
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      argocd.argoproj.io/tracking-id: monitoring:apps/Deployment:cloudtolocalllm/prometheus
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"argocd.argoproj.io/tracking-id":"monitoring:apps/Deployment:cloudtolocalllm/prometheus"},"name":"prometheus","namespace":"cloudtolocalllm"},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"prometheus"}},"template":{"metadata":{"labels":{"app":"prometheus"}},"spec":{"containers":[{"args":["--config.file=/etc/prometheus/prometheus.yml","--storage.tsdb.path=/prometheus","--storage.tsdb.retention.time=30d"],"image":"prom/prometheus:latest","name":"prometheus","ports":[{"containerPort":9090}],"resources":{"limits":{"cpu":"1000m","memory":"2Gi"},"requests":{"cpu":"250m","memory":"512Mi"}},"volumeMounts":[{"mountPath":"/etc/prometheus","name":"config"},{"mountPath":"/prometheus","name":"storage"}]}],"initContainers":[{"args":["# Simple substitution using sed since envsubst is missing in base alpine\n# We replace the placeholders with environment variable values\ncat /etc/prometheus-raw/prometheus.yml \\\n  | sed \"s|\\${GRAFANA_CLOUD_PROMETHEUS_URL}|$GRAFANA_CLOUD_PROMETHEUS_URL|g\" \\\n  | sed \"s|\\${GRAFANA_CLOUD_PROMETHEUS_USER}|$GRAFANA_CLOUD_PROMETHEUS_USER|g\" \\\n  | sed \"s|\\${GRAFANA_CLOUD_PROMETHEUS_TOKEN}|$GRAFANA_CLOUD_PROMETHEUS_TOKEN|g\" \\\n  \u003e /etc/prometheus/prometheus.yml\n"],"command":["/bin/sh","-c"],"env":[{"name":"GRAFANA_CLOUD_PROMETHEUS_URL","valueFrom":{"secretKeyRef":{"key":"grafana-cloud-prometheus-url","name":"cloudtolocalllm-secrets","optional":true}}},{"name":"GRAFANA_CLOUD_PROMETHEUS_USER","valueFrom":{"secretKeyRef":{"key":"grafana-cloud-prometheus-user","name":"cloudtolocalllm-secrets","optional":true}}},{"name":"GRAFANA_CLOUD_PROMETHEUS_TOKEN","valueFrom":{"secretKeyRef":{"key":"grafana-cloud-prometheus-token","name":"cloudtolocalllm-secrets","optional":true}}}],"image":"alpine:latest","name":"config-prep","volumeMounts":[{"mountPath":"/etc/prometheus-raw","name":"config-raw"},{"mountPath":"/etc/prometheus","name":"config"}]}],"securityContext":{"fsGroup":65534,"runAsNonRoot":true,"runAsUser":65534},"serviceAccountName":"prometheus","volumes":[{"configMap":{"name":"prometheus-config"},"name":"config-raw"},{"emptyDir":{},"name":"config"},{"emptyDir":{},"name":"storage"}]}}}}
    creationTimestamp: "2025-12-24T23:56:26Z"
    generation: 1
    name: prometheus
    namespace: cloudtolocalllm
    resourceVersion: "8232768"
    uid: 62c419c4-0e56-4968-b0c7-00153cbd37dc
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: prometheus
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: prometheus
      spec:
        containers:
        - args:
          - --config.file=/etc/prometheus/prometheus.yml
          - --storage.tsdb.path=/prometheus
          - --storage.tsdb.retention.time=30d
          image: prom/prometheus:latest
          imagePullPolicy: Always
          name: prometheus
          ports:
          - containerPort: 9090
            protocol: TCP
          resources:
            limits:
              cpu: "1"
              memory: 2Gi
            requests:
              cpu: 250m
              memory: 512Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /etc/prometheus
            name: config
          - mountPath: /prometheus
            name: storage
        dnsPolicy: ClusterFirst
        initContainers:
        - args:
          - |
            # Simple substitution using sed since envsubst is missing in base alpine
            # We replace the placeholders with environment variable values
            cat /etc/prometheus-raw/prometheus.yml \
              | sed "s|\${GRAFANA_CLOUD_PROMETHEUS_URL}|$GRAFANA_CLOUD_PROMETHEUS_URL|g" \
              | sed "s|\${GRAFANA_CLOUD_PROMETHEUS_USER}|$GRAFANA_CLOUD_PROMETHEUS_USER|g" \
              | sed "s|\${GRAFANA_CLOUD_PROMETHEUS_TOKEN}|$GRAFANA_CLOUD_PROMETHEUS_TOKEN|g" \
              > /etc/prometheus/prometheus.yml
          command:
          - /bin/sh
          - -c
          env:
          - name: GRAFANA_CLOUD_PROMETHEUS_URL
            valueFrom:
              secretKeyRef:
                key: grafana-cloud-prometheus-url
                name: cloudtolocalllm-secrets
                optional: true
          - name: GRAFANA_CLOUD_PROMETHEUS_USER
            valueFrom:
              secretKeyRef:
                key: grafana-cloud-prometheus-user
                name: cloudtolocalllm-secrets
                optional: true
          - name: GRAFANA_CLOUD_PROMETHEUS_TOKEN
            valueFrom:
              secretKeyRef:
                key: grafana-cloud-prometheus-token
                name: cloudtolocalllm-secrets
                optional: true
          image: alpine:latest
          imagePullPolicy: Always
          name: config-prep
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /etc/prometheus-raw
            name: config-raw
          - mountPath: /etc/prometheus
            name: config
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext:
          fsGroup: 65534
          runAsNonRoot: true
          runAsUser: 65534
        serviceAccount: prometheus
        serviceAccountName: prometheus
        terminationGracePeriodSeconds: 30
        volumes:
        - configMap:
            defaultMode: 420
            name: prometheus-config
          name: config-raw
        - emptyDir: {}
          name: config
        - emptyDir: {}
          name: storage
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2025-12-24T23:56:29Z"
      lastUpdateTime: "2025-12-24T23:56:29Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    - lastTransitionTime: "2025-12-24T23:56:26Z"
      lastUpdateTime: "2025-12-24T23:56:29Z"
      message: ReplicaSet "prometheus-74b9c6f978" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      argocd.argoproj.io/sync-wave: "10"
      argocd.argoproj.io/tracking-id: web-frontend:apps/Deployment:cloudtolocalllm/web
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"argocd.argoproj.io/sync-wave":"10","argocd.argoproj.io/tracking-id":"web-frontend:apps/Deployment:cloudtolocalllm/web"},"labels":{"app":"web","environment":"development"},"name":"web","namespace":"cloudtolocalllm"},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"web"}},"strategy":{"rollingUpdate":{"maxSurge":1,"maxUnavailable":0},"type":"RollingUpdate"},"template":{"metadata":{"labels":{"app":"web","environment":"development"}},"spec":{"affinity":{"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"app","operator":"In","values":["web"]}]},"topologyKey":"kubernetes.io/hostname"},"weight":100}]}},"containers":[{"env":[{"name":"ENVIRONMENT","value":"development"},{"name":"API_URL","valueFrom":{"configMapKeyRef":{"key":"API_DOMAIN","name":"cloudtolocalllm-config"}}}],"image":"imrightguycloudtolocalllm.azurecr.io/web:7.10.9-202512190353","imagePullPolicy":"Always","livenessProbe":{"failureThreshold":3,"httpGet":{"path":"/health","port":8080},"initialDelaySeconds":30,"periodSeconds":10,"timeoutSeconds":5},"name":"web","ports":[{"containerPort":8080,"name":"http"}],"readinessProbe":{"failureThreshold":3,"httpGet":{"path":"/health","port":8080},"initialDelaySeconds":10,"periodSeconds":5,"timeoutSeconds":3},"resources":{"limits":{"cpu":"500m","memory":"512Mi"},"requests":{"cpu":"25m","memory":"256Mi"}},"startupProbe":{"failureThreshold":30,"httpGet":{"path":"/health","port":8080},"initialDelaySeconds":5,"periodSeconds":5,"timeoutSeconds":3},"volumeMounts":[{"mountPath":"/app","name":"app-code"}]}],"imagePullSecrets":[{"name":"regcred"}],"initContainers":[{"command":["sh","-c","until nc -z api-backend.cloudtolocalllm.svc.cluster.local 8080; do\n  echo \"Waiting for api-backend...\"\n  sleep 2\ndone\n"],"image":"alpine:latest","name":"wait-for-api"}],"serviceAccountName":"web-sa","volumes":[{"emptyDir":{},"name":"app-code"}]}}}}
    creationTimestamp: "2025-12-24T23:56:29Z"
    generation: 1
    labels:
      app: web
      environment: development
    name: web
    namespace: cloudtolocalllm
    resourceVersion: "8237090"
    uid: 872e5f09-de43-4666-a801-d584b6ac001b
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: web
    strategy:
      rollingUpdate:
        maxSurge: 1
        maxUnavailable: 0
      type: RollingUpdate
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: web
          environment: development
      spec:
        affinity:
          podAntiAffinity:
            preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchExpressions:
                  - key: app
                    operator: In
                    values:
                    - web
                topologyKey: kubernetes.io/hostname
              weight: 100
        containers:
        - env:
          - name: ENVIRONMENT
            value: development
          - name: API_URL
            valueFrom:
              configMapKeyRef:
                key: API_DOMAIN
                name: cloudtolocalllm-config
          image: imrightguycloudtolocalllm.azurecr.io/web:7.10.9-202512190353
          imagePullPolicy: Always
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /health
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
          name: web
          ports:
          - containerPort: 8080
            name: http
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /health
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 10
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 3
          resources:
            limits:
              cpu: 500m
              memory: 512Mi
            requests:
              cpu: 25m
              memory: 256Mi
          startupProbe:
            failureThreshold: 30
            httpGet:
              path: /health
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 5
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 3
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /app
            name: app-code
        dnsPolicy: ClusterFirst
        imagePullSecrets:
        - name: regcred
        initContainers:
        - command:
          - sh
          - -c
          - |
            until nc -z api-backend.cloudtolocalllm.svc.cluster.local 8080; do
              echo "Waiting for api-backend..."
              sleep 2
            done
          image: alpine:latest
          imagePullPolicy: Always
          name: wait-for-api
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: web-sa
        serviceAccountName: web-sa
        terminationGracePeriodSeconds: 30
        volumes:
        - emptyDir: {}
          name: app-code
  status:
    conditions:
    - lastTransitionTime: "2025-12-24T23:56:29Z"
      lastUpdateTime: "2025-12-24T23:56:29Z"
      message: Deployment does not have minimum availability.
      reason: MinimumReplicasUnavailable
      status: "False"
      type: Available
    - lastTransitionTime: "2025-12-25T00:06:30Z"
      lastUpdateTime: "2025-12-25T00:06:30Z"
      message: ReplicaSet "web-855d58c996" has timed out progressing.
      reason: ProgressDeadlineExceeded
      status: "False"
      type: Progressing
    observedGeneration: 1
    replicas: 1
    unavailableReplicas: 1
    updatedReplicas: 1
kind: List
metadata:
  resourceVersion: ""
