# Azure Managed Certificate for AKS
# This creates an Azure-managed SSL certificate that is automatically provisioned and renewed by Azure
#
# Prerequisites:
# 1. Azure DNS zone configured in the same resource group
# 2. Proper permissions for Azure managed certificates
#
# Note: Azure Managed Certificates require specific ingress controller configuration
# This is an alternative approach using Azure Application Gateway or Azure Front Door

apiVersion: v1
kind: Secret
metadata:
  name: azure-managed-cert
  namespace: cloudtolocalllm
type: Opaque
stringData:
  # This secret will be populated by Azure managed certificate service
  # The certificate will be automatically provisioned by Azure
  note: "Azure Managed Certificate will be automatically provisioned"
---
# Certificate resource for Azure Managed Certificate
# This references an Azure-managed certificate created via Azure Portal or CLI
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: cloudtolocalllm-azure-cert-ingress
  namespace: cloudtolocalllm
  annotations:
    # Azure Managed Certificate annotation
    # This tells the ingress to use Azure-managed certificate
    kubernetes.io/ingress.class: azure/application-gateway
    # Application Gateway managed certificate
    appgw.ingress.kubernetes.io/ssl-redirect: "true"
spec:
  # Azure Application Gateway with managed certificates
  # Note: This requires Application Gateway Ingress Controller (AGIC)
  ingressClassName: azure-application-gateway

