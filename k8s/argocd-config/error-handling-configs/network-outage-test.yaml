# Error Handling Configuration: Network Outage Test
# This configuration simulates network connectivity issues
# DO NOT APPLY IN PRODUCTION - FOR TESTING ONLY

apiVersion: v1
kind: ConfigMap
metadata:
  name: test-network-outage
  namespace: argocd
  labels:
    test: error-handling
    scenario: network-outage
data:
  # Configuration to test network outage handling
  network-test: "enabled"
  outage-simulation: "true"
  timeout-settings: |
    repo-server-timeout: 30s
    app-sync-timeout: 120s
    retry-attempts: 3
---
# Service that will be temporarily unavailable during testing
apiVersion: v1
kind: Service
metadata:
  name: test-unavailable-service
  namespace: argocd
  labels:
    test: error-handling
    scenario: network-outage
spec:
  selector:
    app: test-unavailable-app
  ports:
  - port: 8080
    targetPort: 8080
    protocol: TCP
  type: ClusterIP
---
# ConfigMap to simulate repository unavailability
apiVersion: v1
kind: ConfigMap
metadata:
  name: test-repo-unavailable
  namespace: argocd
  labels:
    test: error-handling
    scenario: network-outage
data:
  # Simulate repository connection issues
  repo-url: "https://nonexistent-repo.example.com/test"
  connection-timeout: "5s"
  retry-count: "3"
  expected-failure: "connection refused"