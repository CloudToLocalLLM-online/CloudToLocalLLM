{
  "enabled": true,
  "name": "Code Quality Analyzer",
  "description": "Monitors source code files for changes and analyzes modified code for potential improvements including code smells, design patterns, and best practices. Generates actionable suggestions for improving code quality while maintaining existing functionality.",
  "version": "1",
  "when": {
    "type": "fileEdited",
    "patterns": [
      "lib/**/*.dart",
      "api-backend/**/*.js",
      "streaming-proxy/**/*.js",
      "scripts/**/*.sh",
      "scripts/**/*.ps1",
      "test/**/*.dart",
      "tests/**/*.js"
    ]
  },
  "then": {
    "type": "askAgent",
    "prompt": "Analyze the modified code files for potential improvements. Focus on:\n\n1. **Code Smells**: Identify long methods, duplicate code, complex conditionals, and poor naming\n2. **Design Patterns**: Suggest appropriate patterns (Observer, Factory, Strategy, etc.) where beneficial\n3. **Best Practices**: Review for language-specific conventions (Dart/Flutter, Node.js/JavaScript)\n4. **Performance**: Identify potential optimizations without changing functionality\n5. **Readability**: Suggest improvements for code clarity and maintainability\n6. **Security**: Flag potential security issues or vulnerabilities\n7. **Testing**: Recommend areas that need better test coverage\n\nFor each suggestion:\n- Explain WHY the change would be beneficial\n- Provide specific code examples where possible\n- Prioritize suggestions by impact (High/Medium/Low)\n- Ensure suggestions maintain existing functionality\n- Consider the CloudToLocalLLM architecture and Flutter/Node.js ecosystem\n\nFormat your response as actionable recommendations that a developer can immediately implement."
  }
}