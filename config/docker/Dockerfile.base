# Base Image for CloudToLocalLLM
# Based on Fedora 41 (Stable) to ensure stable Node.js version.
# Rawhide was pulling Node 25 which caused engine warnings.

FROM fedora:41

# Create custom user 'cloudtolocalllm' (UID 1000)
# We do this first to ensure it exists in all derived images
RUN useradd -u 1000 -m -s /bin/bash cloudtolocalllm

# Install essential tools for rsync-based deployment and Node.js runtime
RUN dnf -y install rsync tar openssh-clients nodejs npm && \
    dnf clean all

# Set up working directory
WORKDIR /app
RUN chown cloudtolocalllm:cloudtolocalllm /app

# Default to non-root user
USER cloudtolocalllm
